// Generated by LiveScript 1.4.0
(function(){
  var _, slice$ = [].slice;
  _ = require('underscore');
  exports.wrap = {
    once: function(f){
      var options, gotData, ret;
      options = {
        state: 0,
        data: void 8,
        callbacks: []
      };
      gotData = function(){
        var data;
        data = slice$.call(arguments);
        options.data = data;
        options.state = 2;
        return _.each(options.callbacks, function(callback){
          return callback.apply(this, options.data);
        });
      };
      ret = function(callback){
        if (options.state === 2) {
          _.defer(function(){
            return callback.apply(this, options.data);
          });
        }
        options.callbacks.push(callback);
        if (options.state === 0) {
          options.state = 1;
          return f(gotData);
        }
      };
      return ret;
    },
    multi: function(f){
      return function(){
        var args;
        args = slice$.call(arguments);
        return _.map(args, function(arg){
          if (arg.constructor !== Array) {
            arg = [arg];
          }
          return f.call(this, arg);
        });
      };
    },
    dCurry: function(f, cOptions){
      return function(options){
        var args;
        args = slice$.call(arguments, 1);
        args.unshift(_.extend(cOptions, options));
        return f.apply(this, args);
      };
    }
  };
}).call(this);
